(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(t,e,a){"use strict";a.r(e);var n=a(3),r=a(1),s=a(2),c=a(5),i=a(4),o=a(6),h=a.n(o),l=a(18),d=a.n(l),u=a(10),b=a(8),j=a(15),p=(a(28),a(0));b.e.register(b.d,b.i,b.b,b.n,b.o,b.g);var v=a(30),O=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"renderCharacters",value:function(){for(var t=[],e=0;e<this.props.data.length;e++){var a=this.props.data[e].name===this.props.active?"active":"";t.push(Object(p.jsx)("button",{className:a,onClick:this.props.onClick,children:this.props.data[e].name},Object(u.a)()))}return Object(p.jsxs)(p.Fragment,{children:[t,Object(p.jsxs)("div",{className:"bottom_bar",children:[Object(p.jsx)("button",{onClick:this.props.refreshData,children:"Refresh"},Object(u.a)()),Object(p.jsx)("button",{onClick:this.props.changeTheme,children:"Theme"},Object(u.a)())]})]})}},{key:"render",value:function(){return Object(p.jsx)("nav",{children:Object(p.jsxs)("div",{id:"sticky_nav",children:[Object(p.jsx)("header",{children:"Wealth Manager"}),this.renderCharacters()]})})}}]),a}(h.a.Component),g=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).options={responsive:!0,onClick:n.graphClickEvent(n.props.updateActive)},n}return Object(s.a)(a,[{key:"graphClickEvent",value:function(t){return function(e){var a=e.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!0);if(a.length){var n=a[0],r=e.chart.data.labels[n.index];t(r)}}}},{key:"wealth",value:function(t){return t.reduce((function(t,e){return t+parseFloat(e.total)}),0)}},{key:"wealthWithoutConsumables",value:function(t){return t.reduce((function(t,e){return t+((a=e).consumable?0:parseFloat(a.total));var a}),0)}},{key:"hashColor",value:function(t){return"#"+v(t).slice(10,16)}},{key:"getGraphData",value:function(t,e){for(var a=[],n={},r=0;r<t.length;r++){var s=this.hashColor(t[r].name),c=s+"40";a.push([t[r].name,e(t[r].items),s,c])}a.sort((function(t,e){return e[1]-t[1]})),n.labels=[],n.data=[],n.borderColor=[],n.backgroundColor=[];for(var i=0,o=a;i<o.length;i++){var h=o[i];n.labels.push(h[0]),n.data.push(h[1]),n.borderColor.push(h[2]),n.backgroundColor.push(h[3])}return n}},{key:"graph",value:function(t,e){return console.log(t.borderColor+"33"),{labels:t.labels,datasets:[{label:e,data:t.data,backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:1}]}}},{key:"render",value:function(){var t=this.getGraphData(this.props.data,this.wealth),e=this.graph(t,"Wealth in GP"),a=this.getGraphData(this.props.data,this.wealthWithoutConsumables),n=this.graph(a,"Wealth in GP without consumables");return Object(p.jsxs)(h.a.Fragment,{children:[Object(p.jsx)("div",{className:"chart",children:Object(p.jsx)(j.a,{options:this.options,data:e,type:"bar"})}),Object(p.jsx)("div",{className:"chart",children:Object(p.jsx)(j.a,{options:this.options,data:n,type:"bar"})})]})}}]),a}(h.a.Component),m=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).tableHeader=["name","level","quantity","value","total","consumable"],t}return Object(s.a)(a,[{key:"capitalizeFirstLetter",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"renderHeaderRow",value:function(){var t,e=[],a=Object(n.a)(this.tableHeader);try{for(a.s();!(t=a.n()).done;){var r=t.value,s="";r===this.props.sorting&&(s="active",isNaN(this.props.data[0].items[0][r])?s+=this.props.ascending?" headerSortAscending":" headerSortDescending":s+=this.props.ascending?" headerSortAscendingNumber":" headerSortDescendingNumber"),e.push(Object(p.jsx)("th",{className:"tableHeader",children:Object(p.jsx)("button",{onClick:this.props.onClick,className:s,children:this.capitalizeFirstLetter(r)})},Object(u.a)()))}}catch(c){a.e(c)}finally{a.f()}return Object(p.jsx)(h.a.Fragment,{children:Object(p.jsx)("tr",{children:e},Object(u.a)())},Object(u.a)())}},{key:"renderRow",value:function(t){return Object(p.jsx)(h.a.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:Object(p.jsx)("p",{children:t.name})},Object(u.a)()),Object(p.jsx)("th",{children:Object(p.jsx)("p",{children:t.level})},Object(u.a)()),Object(p.jsx)("th",{children:Object(p.jsx)("p",{children:t.quantity})},Object(u.a)()),Object(p.jsx)("th",{children:Object(p.jsxs)("p",{children:[t.value," GP"]})},Object(u.a)()),Object(p.jsx)("th",{children:Object(p.jsxs)("p",{children:[t.total," GP"]})},Object(u.a)()),Object(p.jsx)("th",{children:Object(p.jsx)("p",{children:t.consumable?"\u2713":"\u2717"})},Object(u.a)())]},Object(u.a)())},Object(u.a)())}},{key:"compareFct",value:function(t,e){t=t[this.props.sorting],e=e[this.props.sorting];var a=this.props.ascending?1:-1;return(isNaN(t)?isNaN(e)?t.localeCompare(e):1:isNaN(e)?-1:parseFloat(t)-parseFloat(e))*a}},{key:"renderRows",value:function(){var t=this,e=[];e.push(this.renderHeaderRow());for(var a=0;a<this.props.data.length;a++)if(this.props.data[a].name===this.props.active){var n=this.props.data[a].items;n=n.sort((function(e,a){return t.compareFct(e,a)}));for(var r=0;r<n.length;r++)e.push(this.renderRow(n[r],r))}return e}},{key:"render",value:function(){return Object(p.jsx)(h.a.Fragment,{children:Object(p.jsx)("table",{children:Object(p.jsx)("tbody",{children:this.renderRows()})})})}}]),a}(h.a.Component),f=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={data:{},active:"",sorting:"name",ascending:!0,theme:"dark"},n}return Object(s.a)(a,[{key:"getData",value:function(){var t=this;fetch("/wealth").then((function(t){return t.json()})).then((function(e){t.setState({data:e,active:e[0].name})}))}},{key:"componentDidMount",value:function(){this.getData(),document.documentElement.setAttribute("data-theme",this.state.theme)}},{key:"sortTable",value:function(t){var e=t.target.innerText.toLowerCase();e===this.state.sorting?this.setState({ascending:!this.state.ascending}):this.setState({sorting:e,ascending:!0})}},{key:"toggleTheme",value:function(){var t=this;this.setState((function(t){return{theme:"light"===t.theme?"dark":"light"}}),(function(){document.documentElement.setAttribute("data-theme",t.state.theme)}))}},{key:"render",value:function(){var t=this;return 0===Object.keys(this.state.data).length?Object(p.jsx)("h1",{children:" Data is Loading, please stand by... "}):Object(p.jsxs)(h.a.Fragment,{children:[Object(p.jsx)(O,{data:this.state.data,active:this.state.active,onClick:function(e){return t.setState({active:e.target.innerText})},refreshData:function(){return t.getData()},changeTheme:function(){t.toggleTheme()}}),Object(p.jsxs)("main",{children:[Object(p.jsx)("header",{id:"title",children:this.state.active}),Object(p.jsx)("div",{id:"charts",children:Object(p.jsx)(g,{data:this.state.data,updateActive:function(e){return t.setState({active:e})}})}),Object(p.jsx)("section",{id:"table",children:Object(p.jsx)(m,{data:this.state.data,active:this.state.active,sorting:this.state.sorting,ascending:this.state.ascending,onClick:function(e){t.sortTable(e)}})})]})]})}}]),a}(h.a.Component);d.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(f,{}))},28:function(t,e,a){}},[[19,1,2]]]);
//# sourceMappingURL=main.bbf06e03.chunk.js.map